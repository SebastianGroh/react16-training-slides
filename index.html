<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>reactJS</title>

    <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">

    <link rel="icon" href="common/img/logo.png">

    <link rel="stylesheet" href="reveal.js-3.6.0/css/reveal.css">
    <link rel="stylesheet" href="reveal.js-3.6.0/css/theme/white.css">
    <link rel="stylesheet" href="common/css/common.css">

    <!-- Theme used for syntax highlighting of code -->
    <!-- <link rel="stylesheet" href="reveal.js-3.6.0/lib/css/zenburn.css"> -->
    <link rel="stylesheet" href="css/solarized-light.css">

    <!-- Printing and PDF exports -->
    <!-- <script>
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script> -->
</head>
<body>
  <div class="devon reveal">
    <div class="slides">
      <section data-background-image="common/img/shapes/Fixed_Shape_3_SVG/Fixed_Shape_3_ZestGreen_RGB.svg">
        <div style="display:flex; 
          justify-content: flex-end;
          align-items: center;
          ">
          <img style="margin: 0; width: 20%; background: none" class="plain" src="common/img/Capgemini_Logo_Color_RGB.png" alt="Capgemini"/>
        </div>
        
        <h1>
          <div>ReactJS <span class="red">training</span>.</div>
        </h1>
        
        <div style="display:flex; 
        justify-content: flex-end;
        ">
        <span style="font-style: italic" class="primaryFont">Bartek Pietrowski</span>
      </div>
    </section>
    
    <section>
      <h2>Agenda</h2>
      
      <ol>
        <li>ES6 wrap-up</li>
        <li>Create React App</li>
        <li>
          ReactJS
          <ul>
            <li>Syntax</li>
            <li>Patterns</li>
            <li>Good practices</li>
            <li>&gt; v.16</li>
          </ul>
        </li>
        <li>React ecosystem</li>
        <li>Project experiences</li>
      </ol>
    </section>

    <section data-background-image="common/img/shapes/Fixed_Shape_5_SVG/Fixed_Shape_5_DeepPurple_RGB.svg">
      <h1 style="color: #f7df1e">
          <div>ES6</div>
          <div>wrap-up</div>
      </h1>
      <img src="img/js-logo-small.png" alt="js logo">
    </section>
    
    <section>
      <h2>let and const</h2>
      <pre><code class="javascript" data-trim data-escape>
        function f() {
          {
            let x;
            {
              // this is ok since it's a block scoped name
              const x = 'sneaky';
              // error, was just defined with `const` above
              x = 'foo';
            }
            // this is ok since it was declared with `let`
            x = 'bar';
            // error, already declared above in this block
            let x = 'inner';
          }
        }
      </code></pre>
    </section>

    <section>
      <h2>let and const</h2>
      <pre><code class="javascript" data-trim data-escape>
        for (var i of [1,2,3]){
          setTimeout(()=>console.log(i),0)
        } 

        // vs.
        
        for (let i of [1,2,3]){
          setTimeout(()=>console.log(i),0)
        }
      </code></pre>
    </section>

    <section>
      <h2>let and const</h2>
      <pre><code class="javascript" data-trim data-escape>
        for (let i of [1,2,3]){
          setTimeout(()=>console.log(i),0)
        }

        // would be in ES5 sth like:

        for (var i of [1,2,3]){
          ((index) => setTimeout(()=>console.log(index),0))(i)
        } 
      </code></pre>
    </section>

    <section>
      <h2>Enhanced object literals</h2>
      <pre><code class="javascript" data-trim data-escape>
        const obj = {
          // Sets the prototype.
          __proto__: theProtoObj,
          // Shorthand for 'handler: handler'
          handler,
          // Methods
          toString() {
            // Super calls
            return 'd ' + super.toString();
          },
          // Computed (dynamic) property names
          [ 'prop_' + (() => 42)() ]: 42
        };
      </code></pre>
    </section>
    
    <section>
      <h2>Template Strings</h2>
      <pre><code class="javascript" data-trim data-escape>
        // Basic literal string creation
        `This is a pretty little template string.`
        
        // Multiline strings
        `In ES5 this is
          not legal.`
        
        // Interpolate variable bindings
        const name = 'Bob', time = 'today';
        `Hello ${name}, how are you ${time}?`
        
        // Unescaped template strings
        String.raw`In ES5 "\n" is a line-feed.`
      </code></pre>
    </section>

    <section>
      <h2>Arrow functions</h2>
      <pre><code class="javascript" data-trim data-escape>
        // Expression bodies
        const incr = [1,2,3].map(v => v + 1);
        const nums = [1,2,3].map((v, i) => v + i);

        // Statement bodies
        nums.forEach(v => {
          if (v % 5 === 0)
            console.log(v);
        });
      </code></pre>
    </section>

    <section>
      <h2>Lexical This</h2>
      <pre><code class="javascript" data-trim data-escape>
        const bob = {
          _name: 'Bob',
          _friends: ['Anna'],
          printFriends() {
            this._friends.forEach(f =>
              console.log(`${this._name} knows ${f}`)
            );
          }
        };
      </code></pre>
    </section>
      
    <section>
      <h2>Useful methods</h2>
      <ul>
        <li>[].includes()</li>
        <li>[].some()</li>
        <li>[].every()</li>
        <li>[].filter()</li>
        <li>[].map()</li>
        <li>[].reduce()</li>
        <li>[].findIndex()</li>
        <li>Object.entries()</li>
        <li>Object.keys()</li>
        <li>Object.values()</li>
        <li>Object.assign()</li>
      </ul>
    </section>      
    
    <section>
      <h2>Spread operator</h2>
      <pre><code class="javascript" data-trim data-escape>
        function f(x, y, z) {
          return x + y + z;
        }
        // Pass each elem of array as argument
        f(...[1,2,3]) === 6 // true


        const g = (x, ...y) => {
          // y is an Array
          return x * y.length;
        }
        g(3, 'hello', true) === 6 // true
      </code></pre>
    </section>
       
    <section>
      <h2>Destructuring</h2>
      <pre><code class="javascript" data-trim data-escape>
        // arrays
        const [a, ,b] = [1,2,3];
        const [a, ...b] = [1,2,3];
        // objects
        const {documentElement, ...other} = document;
        console.log(documentElement);
        console.log(other.location);
        // Fail-soft destructuring with defaults
        const [a = 1] = [];
        a === 1;
        // Object.assign alternative
        {...{a: 'a', b:2, c:3}, ...{b:100, d: 'd'}}
      </code></pre>
      <p>
        <a href="https://ecmasyntax.io/pages/ECMAScript%202015%20(ES6)/Destructuring%20assignment/Object%20destructuring#destructuring-in-iterations">
          -&gt; Example - in iteration &lt;-
        </a>
      </p>
    </section>

    <section>
        <h2>Default parameters</h2>
        <pre><code class="javascript" data-trim data-escape>
          const f = (x, y = 12) => {
            // y is 12 if not passed (or passed as undefined)
            return x + y;
          }
          f(3) === 15 // true

          // with destructuring
          const f = ({x:alias = 1, y = 12} = {}) => {
            return alias + y;
          }
        </code></pre>
      </section>
    
    <section>
      <h2>Symbols</h2>
      <pre><code class="javascript" data-trim data-escape>
        const key = Symbol('key');
        const obj = {
          [key]: 123
        }
        console.log(obj.key)
        console.log(obj[key])
      </code></pre>
    </section>
    
    <section>
      <h2>Iterators + For..Of</h2>
      <pre><code class="javascript" data-trim data-escape>
        const fibonacci = {
          [Symbol.iterator]() {
            let pre = 0, cur = 1;
            return {
              next() {
                [pre, cur] = [cur, pre + cur];
                return { done: false, value: cur }
              }
            }
          }
        }
        
        for (let n of fibonacci) {
          // truncate the sequence at 1000
          if (n > 1000)
            break;
          console.log(n);
        }
      </code></pre>
    </section>
    
    <section>
      <h2>Generators</h2>
      <pre><code class="javascript" data-trim data-escape>
        const fibonacci = {
          [Symbol.iterator]: function*() {
            var pre = 0, cur = 1;
            for (;;) {
              [pre, cur] = [cur, pre + cur];
              yield cur;
            }
          }
        }
      </code></pre>
    </section>
    
    <section>
      <h2>Modules</h2>
      <pre><code class="javascript" data-trim data-escape>
        // lib/math.js
        export function sum(x, y) {
          return x + y;
        }
        export const pi = 3.141593;
        // app.js
        import * as math from "lib/math";
        console.log(`2π = ${math.sum(math.pi, math.pi)}`);
        // otherApp.js
        import {sum, pi} from "lib/math";
        console.log(`2π = ${sum(pi, pi)}`);
        // i.do.not.like.default.export.js
        export default function(x) {
            return Math.exp(x);
        }
      </code></pre>

      <p>
        <a href="https://blog.neufund.org/why-we-have-banned-default-exports-and-you-should-do-the-same-d51fdc2cf2ad">
          -&gt; Why I do not like default export &lt;-
        </a>
      </p>
    </section>
    
    <section>
      <h2>Map + Set + WeakMap + WeakSet</h2>
      <pre><code class="javascript" data-trim data-escape>
          // Sets
          const s = new Set();
          s.add('hello').add('goodbye').add('hello');
          s.size === 2;
          s.has('hello') === true;
          
          // Maps
          const m = new Map();
          m.set('hello', 42);
          m.set(s, 34);
          m.get(s) == 34;
          
          // Weak Maps
          const wm = new WeakMap();
          wm.set(s, { extra: 42 });
          wm.size === undefined
          
          // Weak Sets
          const ws = new WeakSet();
          ws.add({ data: 42 });
          // Because the added object has no other references, 
          // it will not be held in the set
      </code></pre>
    </section>
    
    <section>
      <h2>Proxies</h2>
      <pre><code class="javascript" data-trim data-escape>
          // Proxying a normal object
          const target = {};
          const handler = {
            get: function (receiver, name) {
              return `Hello, ${name}!`;
            }
          };
          
          const p = new Proxy(target, handler);
          p.world === 'Hello, world!';
      </code></pre>
    </section>
    <section>
      <h2>Proxies</h2>
      <pre><code class="javascript" data-trim data-escape>
          const target = function () { return 'I am the target'; };
          const handler = {
            apply: function (receiver, ...args) {
              return `I am the proxy -> ${receiver()}`;
            }
          };

          const p = new Proxy(target, handler);
          p(); // "I am the proxy -> I am the target"
      </code></pre>
    </section>
    
    <section>
      <h2>Classes (*)</h2>
      <pre><code class="javascript" data-trim data-escape>
          class SkinnedMesh extends THREE.Mesh {
            constructor(geometry, materials) {
              super(geometry, materials);
          
              this.idMatrix = SkinnedMesh.defaultMatrix();
              this.bones = [];
              this.boneMatrices = [];
              //...
            }
            update(camera) {
              //...
              super.update();
            }
            static defaultMatrix() {
              return new THREE.Matrix4();
            }
          }
      </code></pre>
    </section>
    
    <section>
      <h2>Promises</h2>
      <pre><code class="javascript" data-trim data-escape>
        function timeout(duration = 0) {
          return new Promise((resolve, reject) => {
              setTimeout(resolve, duration);
          })
        }
        
        const p = timeout(1000).then(() => {
            return timeout(2000);
        }).then(() => {
            throw new Error('hmm');
        }).catch(err => Promise.all([
            timeout(100).then(()=>100), 
            timeout(200).then(()=>200)
          ])
        ).then(console.log)
      </code></pre>
    </section>

    <section>
      <h2>Promises with async await</h2>
      <pre><code class="javascript" data-trim data-escape>
        async function timeout(duration = 0) {
          return new Promise((resolve, reject) => {
              setTimeout(resolve, duration);
          })
        }
        
        await timeout(1000);
        await timeout(2000);
        try {
          throw new Error('hmm');        
        } catch (err) {
          const data = await Promise.all([
            timeout(100).then(()=>100), 
            timeout(200).then(()=>200)
          ]);
          console.log(data);
        }
      </code></pre>
    </section>

    <section>
      <h2>RORO pattern</h2>
      <pre><code class="javascript" data-trim data-escape>
          async saveUser({
            upsert = true,
            transaction,
            ...userInfo
          }) {
            // save to the DB
            return {
              operation, // e.g 'INSERT'
              status, // e.g. 'Success'
              saved: userInfo
            }
          }
      </code></pre>
      <p>
        <a href="https://medium.freecodecamp.org/elegant-patterns-in-modern-javascript-roro-be01e7669cbd">
          Read more
        </a>
      </p>
    </section>

    
    <section data-background-position="100% 100%" data-background-image="common/img/shapes/Fixed_Shape_2_SVG/Fixed_Shape_2_VibrantBlue_RGB.svg">
      <h1 style="color: black">
          <div>Enter</div>
          <div>React JS</div>
      </h1>
    </section>

    <section>
      <h2>What is React?</h2> 
      <ol>
        <li>Efficient library for building UIs</li>
        <li>Virtual DOM, granular updates</li>
        <li>Build complex UI from pieces - components</li>
        <li>Library that uses the power of JS</li>
        <li>New way of thinking (React Native, React VR)</li>
        <li>
          <a href="https://stateofjs.com/2017/front-end/results">
            Highly popular library
          </a>
        </li>
      </ol>
    </section>

    <section>
      <h3>Smallest React example</h3>
      <pre><code class="javascript" data-trim data-escape>
          ReactDOM.render(
            &lt;h1&gt;Hello, world!&lt;/h1&gt;,
            document.getElementById('root')
          );
      </code></pre>
    </section>

    <section>
      <h2>Create react app</h2> 
      <ol>
        <li>Empty React project template</li>
        <li>No configuration required</li>
        <li>One dependency</li>
        <li>No Lock-In</li>
        <li>Good practices in place</li>
        <li>Plenty of hints in the docs</li>
        <li>Extremely popular - good community support</li>
      </ol>
    </section>

    <section>
      <h3>Our first React component</h3>
      <pre><code class="javascript" data-trim data-escape>
        class HelloWorld extends Component {
          render() {
            return (
              &lt;div className="hello"&gt;
                Hello World
              &lt;/div&gt;
            );
          }
        }
        // usage example: &lt;HelloWorld/&gt;
      </code></pre>
    </section>

    <section>
      <h3>But what is this funny JS and XML mixup?</h3>
      <div class="fragment">
        <h2 style="color: var(--cap-red)">JSX!</h2>
        <ul>
          <li>Easy to write</li>
          <li>Easy to read</li>
          <li>All in one file</li>
          <li>Weird for many devs</li>
        </ul>
      </div>
    </section>

    <section>
      <h3>Let`s see previous example in pure JS</h3>
      <pre><code class="javascript" data-trim data-escape>
        class HelloWorld extends Component {
          render() {
            return React.createElement('div', {className: 'hello'}, 
              'Hello World'
            );
          }
        }
      </code></pre>
    </section>

    <section>
      <h3>Passing Data Through Props - Parent</h3>
      <pre><code class="javascript" data-trim data-escape>
        export class App extends Component {
          world = 'World';
          render() {
            return (
                &lt;div className="book-app"&gt;
                  &lt;Hello who={this.world} /&gt;
                &lt;/div&gt;
              );
          }
        }
      </code></pre>
    </section>

    <section>
      <h3>Passing Data Through Props - Child</h3>
      <pre><code class="javascript" data-trim data-escape>
        export class Hello extends Component {
          render() {
            const { who } = this.props;
            return &lt;span className="hello"&gt;Hello {who}&lt;/span&gt;;
          }
        }
      </code></pre>
      <p style="color: var(--cap-red)">Props are read only!</p>
    </section>

    <section>
      <h3>Interactive Component - state + event handling</h3>
      <pre><code class="javascript" data-trim data-escape>
          export class Hello extends Component {
            constructor(props) {
              super(props);
              this.state = {
                who: props.who,
              };
            }
            onWhoChange(e) {
              e.preventDefault();
              this.setState({
                  who: e.target.value,
              });
            }
            render() {
              const { who } = this.state;
              return (
                &lt;div className="hello-container"&gt;   
                  &lt;span className="hello"&gt;Hello {who}&lt;/span&gt;
                  &lt;input value={who} 
                    type="text"               
                    onChange={(e) =&gt; this.onWhoChange(e)}
                  /&gt;
                &lt;/div&gt;   
              );
            }
          }
      </code></pre>
    </section>

    <section>
      <h3>Improvements</h3>
      <pre><code class="javascript" data-trim data-escape>
          export class Hello extends Component {
            constructor(props) {
              super(props);
              this.state = {
                who: props.who,
              };
              this.onWhoChange = this.onWhoChange.bind(this);
            }
            onWhoChange(e) {
              e.preventDefault();
              const who = e.target.value;
              this.setState((prevState, props) => ({
                  who,
              }));
            }
            render() {
              const { who } = this.state;
              return (
                &lt;div className="hello-container"&gt;   
                  &lt;span className="hello"&gt;Hello {who}&lt;/span&gt;
                  &lt;input value={who} 
                    type="text"               
                    onChange={this.onWhoChange(e)}
                  /&gt;
                &lt;/div&gt;   
              );
            }
          }
      </code></pre>
    </section>

    <section>
      <h3>Dumb and smart components</h3>
    </section>

    <section>
      <h3>Lifecycle methods</h3>
      <p>
        <a href="https://reactjs.org/docs/react-component.html">
          Check here
        </a>
      </p>
    </section>

    <section>
      <h3>Layout / slot components</h3>
    </section>

    <section>
      <h3>Task 1 - simple details component</h3>
    </section>
    
    <section>
      <h3>HOCs</h3>
    </section>
    
    <section>
      <h3>Render props</h3>
    </section>
    
    <section>
      <h3>Task 2 - master details view</h3>
    </section>

    <section>
      <h3>Http</h3>
    </section>

    <section>
      <h3>React v.16</h3>
    </section>

    <section>
      <h3>Redux intro</h3>
      <ul>
          <li>
            Inspired by Flux, CQRS, and Event Sourcing
          </li>
          <li>
            Single source of truth
          </li>
          <li>
            State is read-only
          </li>
          <li>
            Changes are made with pure functions (reducers)
          </li>
          <li>
            Great DEV experiance - Hot Reloading with Time Travel
          </li>
      </ul>
    </section>

    <section>
        <h3>Redux</h3>
        <ul>
          <li>
            <a href="https://css-tricks.com/learning-react-redux/">Learning react redux</a>
          </li>
          <li>
            <a href="https://medium.com/codingthesmartway-com-blog/learn-redux-introduction-to-state-management-with-react-b87bc570b12a">short intro</a>
          </li>
          <li>
            <a href="https://redux.js.org/">Docs</a>
          </li>
          <li>
            <a href="https://medium.com/javascript-scene/10-tips-for-better-redux-architecture-69250425af44">10 tips for better redux architecture</a>
          </li>
          <li>
            <a href="https://medium.freecodecamp.org/understanding-redux-the-worlds-easiest-guide-to-beginning-redux-c695f45546f6">Hmmm ?</a>
          </li>
        </ul>
      </section>
   

  </div>
</div>
  

<script src="reveal.js-3.6.0/lib/js/head.min.js"></script>
<script src="reveal.js-3.6.0/js/reveal.js"></script>

<script>
    // More info https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        history: true,

        // More info https://github.com/hakimel/reveal.js#dependencies
        dependencies: [
            {src: 'reveal.js-3.6.0/plugin/markdown/marked.js'},
            {src: 'reveal.js-3.6.0/plugin/markdown/markdown.js'},
            {src: 'reveal.js-3.6.0/plugin/notes/notes.js', async: true},
            {
                src: 'reveal.js-3.6.0/plugin/highlight/highlight.js', async: true, callback: function () {
                hljs.initHighlightingOnLoad();
            }
            }
        ]
    });
</script>
</body>
</html>